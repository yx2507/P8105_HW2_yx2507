---
title: "p8105_hw2_yx2507"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(readxl)
library(dplyr)
```

# problem 1  
```{r}
trash_data = read_excel("./data/HealthyHarborWaterWheelTotals2018-7-28.xlsx") %>%
  janitor::clean_names() %>%
  filter(dumpster != "NA") %>%
mutate(sports_balls = as.integer(sports_balls))

## check
view(trash_data)

```

clean sheet for precipitaiton
```{r}

data_rain_2018 = 
    read_excel("./data/HealthyHarborWaterWheelTotals2018-7-28.xlsx", sheet = '2018 Precipitation', range = "A2:B15") %>% 
    janitor::clean_names() %>% 
    filter(total != "NA") %>% 
    mutate(year = 2018)

data_rain_2017=
  read_excel("./data/HealthyHarborWaterWheelTotals2018-7-28.xlsx", sheet = '2017 Precipitation', range = "A2:B15") %>% 
    janitor::clean_names() %>% 
    filter(total != "NA") %>% 
    mutate(year = 2017)

```

combine and get a`month.name` variable
```{r}
data_raintot = bind_rows(data_rain_2017, data_rain_2018) %>% 
    mutate(month = month.name[month]) %>% 
    select(year, month, total)

```

In trash_data, there are `r nrow(trash_data)` rows and `r ncol(trash_data)`columns with variables related to trash like plastic bottles. 
In precipitation data `data_rain`, there are `r nrow(data_raintot)` rows and `r ncol(data_raintot)`columns. Vraibles are month and the precipitation 
amount as "totoal" median are`r median(pull(trash_data%>% filter(year == 2017), sports_balls))`
    
   
# problem 2
import data month-pol
```{r}
data_pol =
  read_csv(file= "data/pols-month.csv")%>%
  janitor::clean_names()%>%
  separate(mon, into = c("day", "month", "year"), sep = "-") %>%
   select(-day, -prez_gop, - prez_dem)

```

Second, clean the data in snp.csv using a similar process to the above. For consistency across datasets, arrange according to year and month, and organize so that year and month are the leading columns.
```{r}
data_snp=read_csv(file = "data/snp.csv")%>%
  janitor::clean_names()%>%
  separate(date, into = c("month", "day", "year"), sep = "/")%>%
  select(year, month, -day, everything())

```

import and tidy unemployment
```{r}
data_unemploy = read_csv(file="data/unemployment.csv")%>%
  janitor::clean_names()%>%
  pivot_longer(
    jan:dec,
    names_to = "month",
    values_to = "value")
  
```
merge and combine dataset
```{r}
data_combine= left_join(data_pol, data_snp, by ="month")
data_tot=left_join(data_combine,data_unemploy, by = "month")
```

problem 3
```{r}
data_baby=read_csv(file="data/Popular_Baby_Names.csv") %>%
  janitor::clean_names() %>%
  mutate(ethnicity = recode(ethnicity, "ASIAN AND PACI" = "ASIAN AND PACIFIC ISLANDER", "BLACK NON HISP"= "BLACK NON HISPANIC","WHITE NON HISP" = "WHITE NON HISPANIC"))%>%
  mutate(childs_first_name = str_to_lower(childs_first_name)) %>%
  distinct()
  
```

creat a reader friendly table
```{r}
data_baby%>% filter(childs_first_name == "olivia",gender == "FEMALE") %>% select(childs_first_name, year_of_birth,ethnicity, rank) %>%
  pivot_wider(names_from = "year_of_birth",
              values_from = "rank") %>% knitr::kable()
## for male popular name
data_baby%>% filter(gender == "MALE",rank == 1) %>% select(childs_first_name, year_of_birth,ethnicity) %>% pivot_wider(names_from = "year_of_birth",
              values_from = "childs_first_name") %>% knitr::kable()
```

creat a scatterplot
```{r}
library(ggridges)
plot_df = filter(data_baby, ethnicity == "WHITE NON HISPANIC", gender == "MALE", year_of_birth == 2016)
ggplot(plot_df, aes(x = rank, y = count)) + geom_point() +
  labs(
    title = "The first name of white non-hispanic male children born in 2016",
    x = "The rank in popularity of that name",
    y = "The number of children with a name (count)")
```

